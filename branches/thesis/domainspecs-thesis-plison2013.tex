
\chapter{Domain specifications}
\label{chap:domainspecs}

\section{Experiments in Section \ref{sec:wozlearning-experiments}}
\label{sec:domainspecs-wozlearning}

The dialogue policy is composed of a total of fifteen utility rules.  The input variables of these rules are the user dialogue act $a_u$, the last system act $a_m$, the last physical movement $\mathit{lastMove}$, the recorded list of movements $\mathit{sequence}$, and a variable $\mathit{silence}$ expressing the amount of time elapsed since the last (user or system) action.  

The variable $a_u$ is encoded as a list of (one or more) dialogue acts.  This encoding facilitates the processing of utterances containing more than one dialogue act.  

\renewcommand{\arraystretch}{1.0}

\begin{footnotesize}
\begin{longtable}{p{1cm}l} 
$r_{1}: \ \ $ &  $\forall \ x, $ \\ & $\textbf{if} \ (\mathit{silence}\!>\!\mathit{3} \land \mathit{a_m}\!=\!\mathit{Demonstrate}(x)) \ \textbf{then}$ \\
& $\;\;\;\;\; \begin{cases}U(\mathit{a_m}'\!=\!\mathit{AskConfirm})\!=\!\theta_{\mathrm{confirm1}}\end{cases}$ \\ 
& $\textbf{else if} \ (\mathit{silence}\!>\!\mathit{2} \land \mathit{a_m}\!=\!\mathit{Demonstrate}(x)) \ \textbf{then}$ \\
& $\;\;\;\;\; \begin{cases}U(\mathit{a_m}'\!=\!\mathit{AskConfirm})\!=\!\theta_{\mathrm{confirm2}}\end{cases}$ \\ 
& $\textbf{else if} \ (\mathit{silence}\!>\!\mathit{1} \land \mathit{a_m}\!=\!\mathit{Demonstrate}(x)) \ \textbf{then}$ \\
& $\;\;\;\;\; \begin{cases}U(\mathit{a_m}'\!=\!\mathit{AskConfirm})\!=\!\theta_{\mathrm{confirm3}}\end{cases}$ \\ \\[-1mm]
$r_{2}: \ \ $ & $\textbf{if} \ (\mathit{Confirm}\!\in\!\mathit{a_u} \land \mathit{lastMove}\!\neq\!\mathit{None}) \ \textbf{then}$ \\
& $\;\;\;\;\; \begin{cases}U(\mathit{a_m}'\!=\!\mathit{RegisterMove})\!=\!\theta_{\mathrm{registerExplicit}}\end{cases}$\\ 
& $\textbf{else}$ \\
& $\;\;\;\;\; \begin{cases}U(\mathit{a_m}'\!=\!\mathit{RegisterMove})\!=\!\theta_{\mathrm{registerExplicit2}}\end{cases}$ \\ \\[-1mm] 
$r_{3}: \ \ $& $\textbf{if} \ (\mathit{Disconfirm}\!\in\!\mathit{a_u} \land \mathit{lastMove}\!\neq\!\mathit{None}) \ \textbf{then}$ \\
& $\;\;\;\;\; \begin{cases}U(\mathit{a_m}'\!=\!\mathit{UndoMove})\!=\!\theta_{\mathrm{undoMove}}\end{cases}$ \\ 
& $\textbf{else}$ \\
& $\;\;\;\;\; \begin{cases}U(\mathit{a_m}'\!=\!\mathit{UndoMove})\!=\!\theta_{\mathrm{undoMove2}}\end{cases}$ \\ \\[-1mm]
$r_{4}: \ \ $& $\textbf{if} \ (\mathit{a_u}\!\neq\!\mathit{None} \land \mathit{lastMove}\!\notin\!\mathit{a_u} \land \mathit{Confirm}\!\notin\!\mathit{a_u} $ \\ & $ \ \ \ \ \   \land \mathit{Disconfirm}\!\notin\!\mathit{a_u} \land \mathit{lastMove}\!\neq\mathit{None}) \ \textbf{then}$ \\
& $\;\;\;\;\; \begin{cases}U(\mathit{a_m}'\!=\!\mathit{RegisterMove})\!=\!\theta_{\mathrm{registerImplicit}}\end{cases}$ \\ 
& $\textbf{else}$ \\
& $\;\;\;\;\; \begin{cases}U(\mathit{a_m}'\!=\!\mathit{RegisterMove})\!=\!\theta_{\mathrm{registerImplicit2}}\end{cases}$ \\ \\[-1mm]
$r_{5}: \ \ $ & $\forall \ x,y,z, $\\
&$\textbf{if} \ (a_u\!=\!x \land \mathit{lastMove}\!\notin\!\mathit{a_u} \land (\mathit{MoveArm}(y,z)\!\in\!\mathit{a_u} $ \\ & $ \ \ \ \ \  \lor \mathit{MoveHead}(y)\!\in\!\mathit{a_u} \lor \mathit{Kneel}\!\in\!\mathit{a_u} \lor \mathit{MoveFoot}(x,y)\!\in\!\mathit{a_u} $ \\ & $ \ \ \ \ \  \lor \mathit{StandUp}\!\in\!\mathit{a_u} \lor \mathit{SitDown}\!\in\!\mathit{a_u} \lor \mathit{Turn}(y)\!\in\!\mathit{a_u})) \ \textbf{then}$ \\
& $\;\;\;\;\; \begin{cases}U(\mathit{a_m}'\!=\!\mathit{Demonstrate(x)})\!=\!\theta_{\mathrm{Demonstrate}}\end{cases}$\\ 
& $\textbf{else}$ \\
& $\;\;\;\;\; \begin{cases}U(\mathit{a_m}'\!=\!\mathit{Demonstrate(x)})\!=\!\theta_{\mathrm{Demonstrate2}}\end{cases}$ \\ \\[-1mm]
$r_{6}: $\ \ & $\textbf{if} \ (\mathit{a_m}\!\neq\!\mathit{AskRepeat}) \ \textbf{then}$ \\
& $\;\;\;\;\; \begin{cases}U(\mathit{a_m}'\!=\!\mathit{AskRepeat})\!=\!\theta_{\mathrm{repeatFirst}}\end{cases}$ \\ & \textbf{else} \\
& $\;\;\;\;\; \begin{cases}U(\mathit{a_m}'\!=\!\mathit{AskRepeat})\!=\!\theta_{\mathrm{repeatSecond}}\end{cases}$ \\ \\[-1mm]
$r_{7}: \ \ $& $\textbf{if} \ (\mathit{Confirm}\!\in\!\mathit{a_u} \land \mathit{|a_u|}\!=\!\mathit{1}) \ \textbf{then}$ \\
& $\;\;\;\;\; \begin{cases}U(\mathit{a_m}'\!=\!\mathit{Acknowledgement})\!=\!\theta_{\mathrm{acknowledgement}}\end{cases}$ \\ 
& $\textbf{else}$ \\
& $\;\;\;\;\; \begin{cases}U(\mathit{a_m}'\!=\!\mathit{Acknowledgement})\!=\!\theta_{\mathrm{acknowledgement2}}\end{cases}$ \\ \\[-1mm]
$r_{8}: \ \ $& $\textbf{if} \ (\mathit{Disconfirm}\!\in\!\mathit{a_u} \land \mathit{|a_u|}\!=\!\mathit{1}) \ \textbf{then}$ \\
& $\;\;\;\;\; \begin{cases}U(\mathit{a_m}'\!=\!\mathit{AskIntention})\!=\!\theta_{\mathrm{askIntention}}\end{cases}$ \\ 
& $\textbf{else}$ \\
& $\;\;\;\;\; \begin{cases}U(\mathit{a_m}'\!=\!\mathit{AskIntention})\!=\!\theta_{\mathrm{askIntention2}}\end{cases}$\\ \\[-1mm]
$r_{9}: \ \ $& $\textbf{if} \ (\mathit{RepeatAll}\!\in\!\mathit{a_u} \land \mathit{sequence}\!\neq\!\mathit{None}) \ \textbf{then}$ \\
& $\;\;\;\;\; \begin{cases}U(\mathit{a_m}'\!=\!\mathit{DemonstrateAll})\!=\!\theta_{\mathrm{demonstrateAll}}\end{cases}$\\ \\[-1mm]
$r_{10}: \ \ $& $\textbf{if} \ (\mathit{ForgetAll}\!\in\!\mathit{a_u} \land \mathit{sequence}\!\neq\!\mathit{None}) \ \textbf{then}$ \\
& $\;\;\;\;\; \begin{cases}U(\mathit{a_m}'\!=\!\mathit{ForgetAll})\!=\!\theta_{\mathrm{forgetAll}}\end{cases}$ \\ \\[-1mm]
$r_{11}: \ \ $& $\textbf{if} \ (\mathit{Say(Compliment)}\!\in\!\mathit{a_u} \land \mathit{a_m}\!=\!\mathit{DemonstrateAll}) \ \textbf{then}$ \\
& $\;\;\;\;\; \begin{cases}U(\mathit{a_m}'\!=\!\mathit{Say(ThankYou)})\!=\!\theta_{\mathrm{sayThankYou}}\end{cases}$ \\ \\[-1mm]
$r_{12}: \ \ $& $\textbf{if} \ (\mathit{GoToInitPose}\!\in\!\mathit{a_u}) \ \textbf{then}$ \\
& $\;\;\;\;\; \begin{cases}U(\mathit{a_m}'\!=\!\mathit{GoToInitPose})\!=\!\theta_{\mathrm{goToInitPose}}\end{cases}$  \vspace{1mm} \\  \\[-2mm]
$r_{13}: \ \ $& $\textbf{if} \ (\mathit{Stop}\!\in\!\mathit{a_u}) \ \textbf{then} $\\
& $\;\;\;\;\; \begin{cases}U(\mathit{a_m}'\!=\!\mathit{Stop})\!=\!\theta_{\mathrm{stop}}\end{cases} $ \vspace{1mm} \\  \\[-2mm]
$r_{14}: \ \ $&$ \textbf{if} \ (\mathit{Say(Hello)}\!\in\!\mathit{a_u}) \ \textbf{then} $\\
& $\;\;\;\;\; \begin{cases}U(\mathit{a_m}'\!=\!\mathit{Say(Hello)})\!=\!\theta_{\mathrm{sayHello}}\end{cases}$  \vspace{1mm} \\  \\[-2mm]
$r_{15}: \ \ $&$ \textbf{if} \ (\mathit{Say(Goodbye)}\!\in\!\mathit{a_u}) \ \textbf{then} $\\
& $\;\;\;\;\; \begin{cases}U(\mathit{a_m}'\!=\!\mathit{Say(Goodbye)})\!=\!\theta_{\mathrm{sayGoodbye}}\end{cases}$    \vspace{1mm} \\ 
\end{longtable}
\end{footnotesize}

\section{Experiments in Section \ref{sec:rllearning-experiments}}
\label{sec:domainspecs-rrlearning}

\subsubsection*{First experiment}

The six rules below specify the transition model used in the first experiment of Section \ref{sec:rllearning-experiments}. The first rule expresses the probability of the current task being completed after the last system action. If the task is completed, the user intention is reinitialised with a prior distribution given by rules $r_3$, $r_4$ and $r_5$. The user action model is represented by rule $r_6$.
 
\begin{footnotesize}
\begin{longtable}{p{1cm}p{14cm}}
$r_{1}$: \ \ & $\forall \ x, $ \\ & $ \textbf{if} \ (\mathit{a_m}\!=\!\mathit{Do({x})} \land \mathit{i_u}\!=\!\mathit{{x}}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}P(\mathit{completed\mbox{-}task}'\!=\!\mathit{true})\!=\!1.0 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{Excuse(x)}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}P(\mathit{completed\mbox{-}task}'\!=\!\mathit{true})\!=\!1.0 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{ConfirmDetection} \land \mathit{i_u}\!=\!\mathit{DoYouSee(x)}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}P(\mathit{completed\mbox{-}task}'\!=\!\mathit{true})\!=\!1.0 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{DisconfirmDetection} \land \mathit{i_u}\!=\!\mathit{DoYouSee(x)}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}P(\mathit{completed\mbox{-}task}'\!=\!\mathit{true})\!=\!1.0 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{Describe(x)} \land \mathit{i_u}\!=\!\mathit{WhatDoYouSee}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}P(\mathit{completed\mbox{-}task}'\!=\!\mathit{true})\!=\!1.0 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{Do(x)} \lor \mathit{a_m}\!=\!\mathit{Excuse(x)} \lor \mathit{a_m}\!=\!\mathit{Describe(x)} $ \\ & \ \ \ \ \ \ \ \ \ \ \ $\lor \mathit{a_m}\!=\!\mathit{DisconfirmDetection} \lor \mathit{a_m}\!=\!\mathit{ConfirmDetection}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}P(\mathit{completed\mbox{-}task}'\!=\!\mathit{true})\!=\!\theta_{\mathrm{changemind[0]}} \\
P(\mathit{completed\mbox{-}task}'\!=\!\mathit{false})\!=\!\theta_{\mathrm{changemind[1]}} \end{cases}$  \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{i_u}\!=\!\mathit{None}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}P(\mathit{completed\mbox{-}task}'\!=\!\mathit{true})\!=\!1.0 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else}$ \\
& \;\;\;\;\; $ \begin{cases}P(\mathit{completed\mbox{-}task}'\!=\!\mathit{false})\!=\!1.0 \end{cases}$ \\ \\[-1mm]
$r_{2}$: \ \ & $\forall \ x, $ \\
&$ \textbf{if} \ (\mathit{i_u}\!=\!x \ \land \ \mathit{completed\mbox{-}task}\!=\!\mathit{false}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}P(\mathit{i_u}'\!=\!\mathit{{x}})\!=\!1 \end{cases}$ \\ \\[-1mm]
$r_{3}$: \ \ & $ \textbf{if} \ (\mathit{completed\mbox{-}task}\!=\!\mathit{true}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}P(\mathit{i_u}'\!=\!\mathit{Move(Left)})\!=\!\theta_{\mathrm{baseprior[0]}} \\
P(\mathit{i_u}'\!=\!\mathit{Move(Forward)})\!=\!\theta_{\mathrm{baseprior[1]}} \\
P(\mathit{i_u}'\!=\!\mathit{Move(Backward)})\!=\!\theta_{\mathrm{baseprior[2]}} \\
P(\mathit{i_u}'\!=\!\mathit{Move(Right)})\!=\!\theta_{\mathrm{baseprior[3]}} \\
P(\mathit{i_u}'\!=\!\mathit{DoYouSee(object_1)})\!=\!\theta_{\mathrm{baseprior[4]}} \\
P(\mathit{i_u}'\!=\!\mathit{DoYouSee(object_2)})\!=\!\theta_{\mathrm{baseprior[5]}} \\
P(\mathit{i_u}'\!=\!\mathit{WhatDoYouSee})\!=\!\theta_{\mathrm{baseprior[6]}} \\
P(\cdot)\!=\!\theta_{\mathrm{baseprior[7]}} \end{cases}$ \\ \\[-1mm]
$r_{4}$: \ \ & $\forall \ x, $ \\ & $ \textbf{if} \ (\mathit{completed\mbox{-}task}\!=\!\mathit{true} \land \mathit{x}\!\in\!\mathit{carried}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}P(\mathit{i_u}'\!=\!\mathit{Release(x)})\!=\!\theta_{\mathrm{releaseprior[0]}} \\
P(\cdot)\!=\!\theta_{\mathrm{releaseprior[1]}} \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{completed\mbox{-}task}\!=\!\mathit{true}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}P(\mathit{i_u}'\!=\!\mathit{Release(x)})\!=\!\theta_{\mathrm{releaseprior2[0]}} \\
P(\cdot)\!=\!\theta_{\mathrm{releaseprior2[1]}} \end{cases}$ \\ \\[-1mm]
$r_{5}$: \ \ & $\forall \ x, $ \\ & $ \textbf{if} \ (\mathit{completed\mbox{-}task}\!=\!\mathit{true} \land \mathit{carried}\!=\!\mathit{[]}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}P(\mathit{i_u}'\!=\!\mathit{PickUp(x)})\!=\!\theta_{\mathrm{pickupprior[0]}} \\
P(\cdot)\!=\!\theta_{\mathrm{pickupprior[1]}} \end{cases}$\vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{completed\mbox{-}task}\!=\!\mathit{true}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}P(\mathit{i_u}'\!=\!\mathit{PickUp(x)})\!=\!\theta_{\mathrm{pickupprior2[0]}} \\
P(\cdot)\!=\!\theta_{\mathrm{pickupprior2[1]}} \end{cases}$ \\ \\[-1mm]
$r_{6}$: \ \ & $\forall \ x, $ \\ & $\textbf{if} \ (\mathit{a_m}\!=\!\mathit{Ground({x})} \land \mathit{i_u}\!=\!\mathit{{x}}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}P(\mathit{a_u^p}'\!=\!\mathit{Confirm})\!=\!\theta_{\mathrm{groundpredict[0]}} \\
P(\mathit{a_u^p}'\!=\!\mathit{Other})\!=\!\theta_{\mathrm{groundpredict[1]}} \\
P(\cdot)\!=\!\theta_{\mathrm{groundpredict[2]}} \end{cases}$  \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{Ground({x})} \land \mathit{i_u}\!\neq\!\mathit{{x}} \land \mathit{i_u}\!\neq\!\mathit{None}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}P(\mathit{a_u^p}'\!=\!\mathit{Disconfirm})\!=\!\theta_{\mathrm{groundpredict2[0]}} \\
P(\mathit{a_u^p}'\!=\!\mathit{Ask({x})})\!=\!\theta_{\mathrm{groundpredict2[1]}} \\
P(\mathit{a_u^p}'\!=\!\mathit{Other})\!=\!\theta_{\mathrm{groundpredict2[2]}} \\
P(\cdot)\!=\!\theta_{\mathrm{groundpredict2[3]}} \end{cases}$  \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{AskConfirm({x})} \land \mathit{i_u}\!=\!\mathit{{x}}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}P(\mathit{a_u^p}'\!=\!\mathit{Confirm})\!=\!\theta_{\mathrm{confirmpredict[0]}} \\
P(\mathit{a_u^p}'\!=\!\mathit{Ask({x})})\!=\!\theta_{\mathrm{confirmpredict[1]}} \\
P(\mathit{a_u^p}'\!=\!\mathit{Other})\!=\!\theta_{\mathrm{confirmpredict[2]}} \\
P(\cdot)\!=\!\theta_{\mathrm{confirmpredict[3]}} \end{cases}$\vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{AskConfirm({x})} \land \mathit{i_u}\!\neq\!\mathit{{x}} \land \mathit{i_u}\!\neq\!\mathit{None}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}P(\mathit{a_u^p}'\!=\!\mathit{Disconfirm})\!=\!\theta_{\mathrm{disconfirmpredict[0]}} \\
P(\mathit{a_u^p}'\!=\!\mathit{Other})\!=\!\theta_{\mathrm{disconfirmpredict[1]}} \\
P(\cdot)\!=\!\theta_{\mathrm{disconfirmpredict[2]}} \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{Do({x})} \land \mathit{i_u}\!=\!\mathit{{x}}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}P(\mathit{a_u^p}'\!=\!\mathit{RepeatLast})\!=\!\theta_{\mathrm{samemove[0]}} \\
P(\mathit{a_u^p}'\!=\!\mathit{Ask({x})})\!=\!\theta_{\mathrm{samemove[1]}} \\
P(\mathit{a_u^p}'\!=\!\mathit{Other})\!=\!\theta_{\mathrm{samemove[2]}} \\
P(\cdot)\!=\!\theta_{\mathrm{samemove[3]}} \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{AskRepeat} \lor \mathit{completed\mbox{-}task}\!=\!\mathit{true}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}P(\mathit{a_u^p}'\!=\!\mathit{Ask({x})})\!=\!\theta_{\mathrm{intent[0]}} \\
P(\mathit{a_u^p}'\!=\!\mathit{Other})\!=\!\theta_{\mathrm{intent[1]}} \\
P(\cdot)\!=\!\theta_{\mathrm{intent[2]}} \end{cases}$  \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{i_u}\!=\!\mathit{None}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}P(\mathit{a_u^p}'\!=\!\mathit{Other})\!=\!1.0 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else}$ \\
& \;\;\;\;\; $ \begin{cases}P(\mathit{a_u^p}'\!=\!\mathit{Ask({x})})\!=\!\theta_{\mathrm{othercase[0]}} \\
P(\mathit{a_u^p}'\!=\!\mathit{Other})\!=\!\theta_{\mathrm{othercase[1]}} \\
P(\cdot)\!=\!\theta_{\mathrm{othercase[2]}} \end{cases}$ 
%$r_{7}$: \ \ & $ \textbf{if} \ (\mathit{a_u^p}\!\neq\!\mathit{None}) \ \textbf{then} $ \\
% & \;\;\;\;\; $ \begin{cases}P(\mathit{a_u^p}'\!=\!\mathit{a_u^p})\!=\!%\theta_{\mathrm{14[0]}} \\ 
% P(\cdot)\!=\!\theta_{\mathrm{14[1]}} \end{cases}$ 
\end{longtable}
\end{footnotesize}

\subsubsection*{Second experiment}

The second experiment focuses on the comparison of two rule-structured models: a transition model for the model-based approach, and an action--value model for the model-free approach. The transition model is identical to the one described above and will hence not be repeated.  The model-free approach is specified with a set of 11 rules.  The rule $r_0$ first derives a simple representation of the user intention based on the last user dialogue act $a_u$, the next-to-last user dialogue act $a_{u\mbox{-}prev}$, last system act $a_m$ and last system action $\mathit{lastMove}$.  The 10 following rules $r_1, \dots , r_10$ encode the action utilities based on this user intention and on the general context. 

\begin{footnotesize}
\begin{longtable}{p{1cm}p{14cm}}
$r_0$ : \ \ & $\forall \ x, $ \\ &  $ \ \ \textbf{if} \ (\mathit{a_u}\!=\!\mathit{Confirm} \ \land \mathit{a_{u\mbox{-}prev}}\!=\!\mathit{Ask}(x)) \ \textbf{then} $ \\
& \;\;\;\;\; $ \begin{cases}P(\mathit{i_u}'\!=\!x)\!=\!1\end{cases}$  \vspace{1mm}  \\
&  $ \ \ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{Ground}(x) \ \land \mathit{a_{u}}\!\neq\!\mathit{Disconfirm}) \ \textbf{then} $ \\
& \;\;\;\;\; $ \begin{cases}P(\mathit{i_u}'\!=\!x)\!=\!1\end{cases}$  \vspace{1mm}  \\
 &$ \ \ \textbf{else if} \ (\mathit{a_u}\!=\!\mathit{RepeatLast} \ \land \ \mathit{lastMove}\!=\!x) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}P(\mathit{i_u}'\!=\!x)\!=\!1\end{cases}$  \vspace{1mm}  \\
& $ \ \ \textbf{else if } (\mathit{a_u}\!=\!\mathit{Ask}(x)) \ \textbf{then} $ \\
& \;\;\;\;\; $ \begin{cases}P(\mathit{i_u}'\!=\!x)\!=\!1\end{cases}$ \\ \\[-1mm]
$r_{1}$: \ \ & $\forall \ x, $ \\ & $ \textbf{if} \ (\mathit{i_u}\!=\!\mathit{Move(x)}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}U(\mathit{a_m}'\!=\!\mathit{Do(Move({x}))})\!=\!\theta_{\mathrm{movements1}} \\
U(\mathit{a_m}'\!=\!\mathit{Ground(Move({x}))})\!=\!\theta_{\mathrm{movements2}} \end{cases}$  \\ \\[-1mm]
$r_{2}$: \ \ & $\forall \ x,$ \\ &  $\textbf{if} \ (\mathit{i_u}\!=\!\mathit{PickUp({x})} \land \mathit{{x}}\!\in\!\mathit{perceived} \land \mathit{carried}\!=\!\mathit{[]}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}U(\mathit{a_m}'\!=\!\mathit{Do(PickUp(x))})\!=\!\theta_{\mathrm{pickup1}} \\
U(\mathit{a_m}'\!=\!\mathit{Ground(PickUp(x))})\!=\!\theta_{\mathrm{pickup2}} \end{cases}$ \vspace{1mm} \\ 
& $ \textbf{else if} \ (\mathit{i_u}\!=\mathit{PickUp({x})} \land \mathit{{x}}\!\in\!\mathit{perceived} \land \mathit{carried}\!\neq\!\mathit{[]}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{a_m}'\!=\!\mathit{Excuse(AlreadyCarryObject)})\!=\!\theta_{\mathrm{pickup3}} \end{cases}$ \vspace{1mm} \\ 
& $ \textbf{else if} \ (\mathit{i_u}\!=\mathit{PickUp({x})} \land \mathit{{x}}\!\notin\!\mathit{perceived}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{a_m}'\!=\!\mathit{Excuse(DoNotSeeObject)})\!=\!\theta_{\mathrm{pickup4}} \end{cases}$   \\ \\[-1mm]
$r_{3}$: \ \ & $\forall \ x, $ \\ & $ \textbf{if} \ (\mathit{i_u}\!=\!\mathit{Release({x})} \land \mathit{{x}}\!\in\!\mathit{carried}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}U(\mathit{a_m}'\!=\!\mathit{Do({Release(x)})})\!=\!\theta_{\mathrm{release1}} \\
U(\mathit{a_m}'\!=\!\mathit{Ground(Release(x))})\!=\!\theta_{\mathrm{release2}} \end{cases}$ \vspace{1mm} \\ 
& $ \textbf{else if} \ (\mathit{i_u}\!=\!\mathit{Release({x})} \land \mathit{{x}}\!\notin\!\mathit{carried}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{a_m}'\!=\!\mathit{Excuse(DoNotCarryObject)})\!=\!\theta_{\mathrm{release3}} \end{cases}$  \\ \\[-1mm]
$r_{4}$: \ \ & $ \textbf{if} \ (\mathit{i_u}\!\neq\!\mathit{None}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}U(\mathit{a_m}'\!=\!\mathit{None})\!=\!\theta_{\mathrm{none}} \end{cases}$ \vspace{1mm} \\ & $ \textbf{else}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{a_m}'\!=\!\mathit{None})\!=\!\theta_{\mathrm{none2}} \end{cases}$ \\ \\[-1mm]
$r_{5}$: \ \ & $\forall \ x,y,$ \\ & $ \textbf{if} \ (\mathit{i_u}\!=\!x) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}U(\mathit{a_m}'\!=\!\mathit{Do(y)} \land \mathit{a_m}'\!\neq\!\mathit{Do({x})})\!=\!\theta_{\mathrm{wrong1}} \\
U(\mathit{a_m}'\!=\!\mathit{Ground(y)} \land \mathit{a_m}'\!\neq\!\mathit{Ground({x})})\!=\!\theta_{\mathrm{wrong2}} \\
U(\mathit{a_m}'\!=\!\mathit{Excuse(y)})\!=\!\theta_{\mathrm{wrong3}} \end{cases}$ \vspace{1mm} \\ &  \\ \\[-1mm]
$r_{6}$: \ \ & $ \textbf{if} \ (\mathit{a_m}\!\neq\!\mathit{AskRepeat}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}U(\mathit{a_m}'\!=\!\mathit{AskRepeat})\!=\!\theta_{\mathrm{repeat}} \end{cases}$ \\ \\[-1mm]
$r_{7}$: \ \ & $ \textbf{if} \ (\mathit{i_u}\!=\!\mathit{Disconfirm}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}U(\mathit{a_m}'\!=\!\mathit{AskRepeat})\!=\!\theta_{\mathrm{repeat2}} \end{cases}$ \\ \\[-1mm]
$r_{8}$: \ \ & $\forall \ x,y, $ \\
& $ \textbf{if} \ (\mathit{i_u}\!=\!x) \ \textbf{then}$ \\ & \;\;\;\;\; $\begin{cases}U(\mathit{a_m}'\!=\!\mathit{AskConfirm(x)})\!=\!\theta_{\mathrm{confirm1}} \\
U(\mathit{a_m}'\!=\!\mathit{AskConfirm(y)} \land \mathit{a_m}'\!\neq\!\mathit{AskConfirm({x})})\!=\!\theta_{\mathrm{confirm2}} \end{cases}$ \\ \\[-1mm]
$r_{9}$: \ \ & $\forall \ x, $ \\ & $ \textbf{if} \ (\mathit{i_u}\!=\!\mathit{DoYouSee({x})} \land \mathit{{x}}\!\in\!\mathit{perceived}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}U(\mathit{a_m}'\!=\!\mathit{Confirm})\!=\!\theta_{\mathrm{doyousee1}} \\
U(\mathit{a_m}'\!=\!\mathit{Disconfirm})\!=\!\theta_{\mathrm{doyousee2}} \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{i_u}\!=\!\mathit{DoYouSee({x})} \land \mathit{{x}}\!\notin\!\mathit{perceived}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{a_m}'\!=\!\mathit{Disconfirm})\!=\!\theta_{\mathrm{doyousee3}} \\
U(\mathit{a_m}'\!=\!\mathit{Confirm})\!=\!\theta_{\mathrm{doyousee4}} \end{cases}$ \vspace{1mm} \\ 
& $ \textbf{else}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{a_m}'\!=\!\mathit{Confirm})\!=\!\theta_{\mathrm{doyousee5}} \\
U(\mathit{a_m}'\!=\!\mathit{Disconfirm})\!=\!\theta_{\mathrm{doyousee6}} \end{cases}$ \\ \\[-1mm]
$r_{10}$: \ \ & $\forall \ x,$ \\
& $ \textbf{if} \ (\mathit{i_u}\!=\!\mathit{WhatDoYouSee} \ \land \ x\!=\!\mathit{perceived}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}U(\mathit{a_m}'\!=\!\mathit{Describe({x})})\!=\!\theta_{\mathrm{whatdoyousee1}} \end{cases}$ \vspace{1mm} \\ 
& $ \textbf{else}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{a_m}'\!=\!\mathit{Describe(x)})\!=\!\theta_{\mathrm{whatdoyousee2}} \end{cases}$ \\ \\[-1mm]
\end{longtable}
\end{footnotesize}

\section{Experiments in Chapter \ref{chap:user-evaluation}}
\label{sec:domainspecs-usereval}

We list below the collection of rule-structured models employed for the user evaluation experiment.  The models for natural language understanding and generation are common to all three approaches, while the four other models are specific to Approach 3.

\subsubsection*{Natural language understanding model}

The natural language understanding model is composed of a set of simple, deterministic template-matching rules.  The rules map the presence of particular words or phrases in the user utterance $u_u$ to specific user dialogue acts $a_u$. 

The model is divided in two phases.  Rules $r_1$ to $r_{16}$ are responsible for defining the general structure of the dialogue acts.  The last rule $r_{17}$ builds on the results from the previous rules and refines the dialogue act representation through the resolution of references to visual objects and the distinction between short and long movements. 

\begin{footnotesize}
\begin{longtable}{p{1cm}l} 
$r_{1}$: \ \ & $ \textbf{if} \ (\text{"forward"}\!\in\!\mathit{u_u} \lor \text{"forwards"}\!\in\!\mathit{u_u} \lor \text{"straight"}\!\in\!\mathit{u_u}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}P(\mathit{a_u^{\text{temp}}}'\!=\!\mathit{Ask(Move(Forward))})\!=\!1 \end{cases}$ \\ \\[-1mm]
$r_{2}$: \ \ & $ \textbf{if} \ (\text{"backward"}\!\in\!\mathit{u_u} \lor \text{"backwards"}\!\in\!\mathit{u_u} \lor (\text{"back"}\!\in\!\mathit{u_u} \land \text{"turn"}\!\notin\!\mathit{u_u})) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}P(\mathit{a_u^{\text{temp}}}'\!=\!\mathit{Ask(Move(Backward))})\!=\!1 \end{cases}$ \\ \\[-1mm]
$r_{3}$: \ \ & $ \textbf{if} \ (\text{"left"}\!\in\!\mathit{u_u}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}P(\mathit{a_u^{\text{temp}}}'\!=\!\mathit{Ask(Move(Left))})\!=\!1 \end{cases}$ \\ \\[-1mm]
$r_{4}$: \ \ & $ \textbf{if} \ (\text{"go * right"}\!\in\!\mathit{u_u} \lor \text{"turn * right"}\!\in\!\mathit{u_u} \lor \text{"move * right"}\!\in\!\mathit{u_u} \lor \text{"rotate * right"}\!\in\!\mathit{u_u}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}P(\mathit{a_u^{\text{temp}}}'\!=\!\mathit{Ask(Move(Right))})\!=\!1 \end{cases}$ \\ \\[-1mm]
$r_{5}$: \ \ & $ \textbf{if} \ (\text{"turn back"}\!\in\!\mathit{u_u} \lor \text{"turn around"}\!\in\!\mathit{u_u} \lor \text{"one hundred eighty degrees"}\!\in\!\mathit{u_u} \lor \text{"U turn"}\!\in\!\mathit{u_u}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}P(\mathit{a_u^{\text{temp}}}'\!=\!\mathit{Ask(Move(Turn))})\!=\!1 \end{cases}$ \\ \\[-1mm]
$r_{6}$: \ \ & $\forall \ x, $ \\ & $ \textbf{if} \ (\text{"pick up \{x\}"}\!\in\!\mathit{u_u} \lor \text{"pick \{x\} up"}\!\in\!\mathit{u_u} \lor \text{"take \{x\}"}\!\in\!\mathit{u_u} \lor \text{"grasp \{x\}"}\!\in\!\mathit{u_u}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}P(\mathit{a_u^{\text{temp}}}'\!=\!\mathit{Ask(PickUp({x}))})\!=\!1 \end{cases}$ \\ \\[-1mm]
$r_{7}$: \ \ & $ \textbf{if} \ (\text{"release"}\!\in\!\mathit{u_u} \lor \text{"put * down"}\!\in\!\mathit{u_u} \lor \text{"put * on the floor"}\!\in\!\mathit{u_u} \lor \text{"put * on the table"}\!\in\!\mathit{u_u}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}P(\mathit{a_u^{\text{temp}}}'\!=\!\mathit{Ask(Release)})\!=\!1 \end{cases}$ \\ \\[-1mm]
$r_{8}$: \ \ & $ \textbf{if} \ (\text{"what * you see"}\!\in\!\mathit{u_u} \lor \text{"what * you perceive"}\!\in\!\mathit{u_u}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}P(\mathit{a_u^{\text{temp}}}'\!=\!\mathit{Ask(WhatDoYouSee)})\!=\!1 \end{cases}$ \\ \\[-1mm]
$r_{9}$: \ \ & $\forall \ x, $ \\ & $ \textbf{if} \ (\text{"you see \{x\}"}\!\in\!\mathit{u_u} \lor \text{"you perceive \{x\}"}\!\in\!\mathit{u_u}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}P(\mathit{a_u^{\text{temp}}}'\!=\!\mathit{Ask(DoYouSee({x}))})\!=\!1 \end{cases}$ \\ \\[-1mm]
$r_{10}$: \ \ & $ \textbf{if} \ (\text{"yes"}\!\in\!\mathit{u_u} \lor \text{"exactly"}\!\in\!\mathit{u_u} \lor \text{"correct"}\!\in\!\mathit{u_u}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}P(\mathit{a_u^{\text{temp}}}'\!=\!\mathit{Confirm})\!=\!1 \end{cases}$ \\ \\[-1mm]
$r_{11}$: \ \ & $ \textbf{if} \ (\text{"thanks"}\!\in\!\mathit{u_u} \lor \text{"thank"}\!\in\!\mathit{u_u} \lor \text{"correct"}\!\in\!\mathit{u_u} \lor \text{"perfect"}\!\in\!\mathit{u_u} \lor \text{"great"}\!\in\!\mathit{u_u} \lor \text{"good"}\!\in\!\mathit{u_u}$  \\ &  $\ \ \ \ \  \lor \text{"right"}\!=\!\mathit{u_u} \lor \text{"that's right"}\!=\!\mathit{u_u}\!=\!\text{"ok"}\!\in\!\mathit{u_u} ) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}P(\mathit{a_u^{\text{temp}}}'\!=\!\mathit{Grounding})\!=\!1 \end{cases}$ \\ \\[-1mm]
$r_{12}$: \ \ & $ \textbf{if} \ (\text{"no"}\!\in\!\mathit{u_u} \lor \text{"wrong"}\!\in\!\mathit{u_u} \lor \text{"incorrect"}\!\in\!\mathit{u_u}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}P(\mathit{a_u^{\text{temp}}}'\!=\!\mathit{Disconfirm})\!=\!1 \end{cases}$ \\ \\[-1mm]
$r_{13}$: \ \ & $ \textbf{if} \ (\text{"once more"}\!\in\!\mathit{u_u} \lor \text{"one more time"}\!\in\!\mathit{u_u} \lor \text{"repeat"}\!\in\!\mathit{u_u} \lor \text{"again"}\!\in\!\mathit{u_u}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}P(\mathit{a_u^{\text{temp}}}'\!=\!\mathit{RepeatLast})\!=\!1 \end{cases}$ \\ \\[-1mm]
$r_{14}$: \ \ & $ \textbf{if} \ (\text{"hi"}\!\in\!\mathit{u_u} \lor \text{"hello"}\!\in\!\mathit{u_u} \lor \text{"good afternoon"}\!\in\!\mathit{u_u} \lor \text{"good morning"}\!\in\!\mathit{u_u}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}P(\mathit{a_u^{\text{temp}}}'\!=\!\mathit{Greeting})\!=\!1 \end{cases}$ \\ \\[-1mm]
$r_{15}$: \ \ & $ \textbf{if} \ (\text{"bye"}\!\in\!\mathit{u_u} \lor \text{"goodbye"}\!\in\!\mathit{u_u}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}P(\mathit{a_u^{\text{temp}}}'\!=\!\mathit{Closing})\!=\!1 \end{cases}$ \\ \\[-1mm]
$r_{16}$: \ \ & $ \textbf{if} \ (\text{"stop"}\!\in\!\mathit{u_u}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}P(\mathit{a_u^{\text{temp}}}'\!=\!\mathit{Ask(Stop)})\!=\!1 \end{cases}$ \\ \\[-1mm]
$r_{17}$: \ \ & $\forall \ x, $ \\ & $ \textbf{if} \ (\text{"bit"}\!\in\!\mathit{u_u} \land \mathit{a_u^{\text{temp}}}\!=\!\mathit{Move({x})}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}P(\mathit{a_u}'\!=\!\mathit{Ask(Move({x},Short))})\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_u^{\text{temp}}}\!=\!\mathit{Move({x})} \land (\text{"left"}\!\in\!x \lor \text{"right"}\!\in\!x ) \land \text{"thirty degrees"}\!\in\!\mathit{u_u}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}P(\mathit{a_u}'\!=\!\mathit{Ask(Move({x},Short))})\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_u^{\text{temp}}}\!=\!\mathit{PickUp(x)} \land \text{"feet"}\!\in\!\mathit{u_u}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}P(\mathit{a_u}'\!=\!\mathit{Ask(PickUp(AtFeet))})\!=\!1 \end{cases}$  \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_u^{\text{temp}}}\!=\!\mathit{PickUp({x})} \land (\text{"blue"}\!\in\!\mathit{x} \lor (\text{"it"}\!=\!\mathit{x} \land (\mathit{BlueObj}\!\in\!\mathit{a_u} \lor \mathit{BlueObj}\!\in\!\mathit{a_m})) $ \\ & $\ \ \ \ \ \lor (\text{"the"}\!\in\!\mathit{x} \land \mathit{perceived}\!=\![BlueObj] ))) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}P(\mathit{a_u}'\!=\!\mathit{Ask(PickUp(BlueObj))})\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_u^{\text{temp}}}\!=\!\mathit{PickUp({x})} \land (\text{"red"}\!\in\!\mathit{x} \lor (\text{"it"}\!=\!\mathit{x} \land (\mathit{RedObj}\!\in\!\mathit{a_u} \lor \mathit{RedObj}\!\in\!\mathit{a_m})) $ \\ & $\ \ \ \ \  \lor (\text{"the"}\!\in\!\mathit{x} \land \mathit{perceived}\!=\![\mathit{RedObj}]))) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}P(\mathit{a_u}'\!=\!\mathit{Ask(PickUp(RedObj))})\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_u^{\text{temp}}}\!=\!\mathit{PickUp(x)}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}P(\mathit{a_u}'\!=\!\mathit{Ask(PickUp(Other))})\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_u^{\text{temp}}}\!=\!\mathit{DoYouSee({x})} \land \text{"red"}\!\in\!\mathit{x}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}P(\mathit{a_u}'\!=\!\mathit{Ask(DoYouSee(RedObj))})\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_u^{\text{temp}}}\!=\!\mathit{DoYouSee({x})} \land \text{"blue"}\!\in\!\mathit{x}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}P(\mathit{a_u}'\!=\!\mathit{Ask(DoYouSee(BlueObj))})\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_u^{\text{temp}}}\!=\!\mathit{DoYouSee({x})} \land \text{"it"}\!\notin\!\mathit{x}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}P(\mathit{a_u}'\!=\!\mathit{Ask(WhatDoYouSee)})\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} (\mathit{a_u^{\text{temp}}}\!=\!x)$ \\
& \;\;\;\;\; $ \begin{cases}P(\mathit{a_u}'\!=\!x)\!=\!1 \end{cases}$ \\ \\[-1mm]
\end{longtable}
\end{footnotesize}

\subsubsection*{Task completion model}

The task completion model considers a task to be completed whenever the system performs an action that is not a clarification request. The probability of the user changing his mind before the completion of the task is defined by the parameter $\theta_{\mathrm{changemind}}$. 

\begin{footnotesize}
\begin{longtable}{p{2cm}l}
$r_{1}$: \ \ & $\forall \ x, $ \\
& $ \textbf{if} \ (\mathit{a_m}\!\neq\!\mathit{AskConfirm(x)} \land \mathit{a_m}\!\neq\!\mathit{AskRepeat} \land \mathit{a_m}\!\neq\!\mathit{None}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}P(\mathit{completed\mbox{-}task}'\!=\!\mathit{true})\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{i_u}\!=\!\mathit{None}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}P(\mathit{completed\mbox{-}task}'\!=\!\mathit{true})\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else}$ \\
& \;\;\;\;\; $ \begin{cases}P(\mathit{completed\mbox{-}task}'\!=\!\mathit{false})\!=\!\theta_{\mathrm{changemind[0]}} \\
P(\mathit{completed\mbox{-}task}'\!=\!\mathit{true})\!=\!\theta_{\mathrm{changemind[1]}} \end{cases}$ \\ \\[-1mm]
$r_{2}$: \ \ & $ \forall \ x, $ \\ & $ \textbf{if} \ (\mathit{a_m}\!=\!\mathit{Do(x)}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}P(\mathit{lastMove}'\!=\!\mathit{x})\!=\!1 \end{cases}$ \\ \\[-1mm]
\end{longtable}
\end{footnotesize}

\subsubsection*{User goal model}

The user goal model encodes how the user intention $i_u$ is expected to evolve over time, given the current dialogue context.  The intention is only assumed to change when the current task is completed. Rule $r_2$ defines the likelihood of instructions related to spatial movements, while $r_3$ and $r_4$ define the likelihood of user questions related to the robot perception, $r_5$ the likelihood of greeting and closing actions, $r_6$ the likelihood of releasing actions, and $r_7$ and $r_8$ the likelihood of grasping actions.

Rule $r_3$ and $r_7$ are used to increase the probability of grasping instructions and questions about visual objects whenever an object is actually perceived by the robot.

\begin{footnotesize}
\begin{longtable}{p{2cm}l}
$r_{1}$: \ \ & $\forall \ x, $ \\ 
& $ \textbf{if} \ (i_u\!=\!x \ \land \ \mathit{completed\mbox{-}task}\!=\!\mathit{false}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}P(\mathit{i_u}'\!=\!\mathit{{x}})\!=\!1 \end{cases}$ \\ \\[-1mm]
$r_{2}$: \ \ & $ \textbf{if} \ (\mathit{completed\mbox{-}task}\!=\!\mathit{true}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}P(\mathit{i_u}'\!=\!\mathit{Move(Left)})\!=\!\theta_{\mathrm{moveprior[0]}} \\
P(\mathit{i_u}'\!=\!\mathit{Move(Forward)})\!=\!\theta_{\mathrm{moveprior[1]}} \\
P(\mathit{i_u}'\!=\!\mathit{Move(Backward)})\!=\!\theta_{\mathrm{moveprior[2]}} \\
P(\mathit{i_u}'\!=\!\mathit{Move(Right)})\!=\!\theta_{\mathrm{moveprior[3]}} \\
P(\mathit{i_u}'\!=\!\mathit{Move(Left,Short)})\!=\!\theta_{\mathrm{moveprior[4]}} \\
P(\mathit{i_u}'\!=\!\mathit{Move(Forward,Short)})\!=\!\theta_{\mathrm{moveprior[5]}} \\
P(\mathit{i_u}'\!=\!\mathit{Move(Backward,Short)})\!=\!\theta_{\mathrm{moveprior[6]}} \\
P(\mathit{i_u}'\!=\!\mathit{Move(Right,Short)})\!=\!\theta_{\mathrm{moveprior[7]}} \\
P(\mathit{i_u}'\!=\!\mathit{Move(Turn)})\!=\!\theta_{\mathrm{moveprior[8]}} \\
P(\cdot)\!=\!\theta_{\mathrm{moveprior[9]}} \end{cases}$ \\ \\[-1mm]
$r_{3}$: \ \ & $\forall \ x, $ \\ & $ \textbf{if} \ (\mathit{x}\!\in\!\mathit{perceived} \land \mathit{completed\mbox{-}task}\!=\!\mathit{true}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}P(\mathit{i_u}'\!=\!\mathit{DoYouSee(x)})\!=\!\theta_{\mathrm{perceive\_see\_prior[0]}} \\
P(\mathit{i_u}'\!=\!\mathit{WhatDoYouSee})\!=\!\theta_{\mathrm{perceive\_see\_prior[1]}} \\
P(\cdot)\!=\!\theta_{\mathrm{perceive\_see\_prior[2]}} \end{cases}$ \\ \\[-1mm]
$r_{4}$: \ \ & $ \textbf{if} \ (\mathit{completed\mbox{-}task}\!=\!\mathit{true}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}P(\mathit{i_u}'\!=\!\mathit{DoYouSee(RedObj)})\!=\!\theta_{\mathrm{perceive\_nosee\_prior[0]}} \\
P(\mathit{i_u}'\!=\!\mathit{DoYouSee(BlueObj)})\!=\!\theta_{\mathrm{perceive\_nosee\_prior[1]}} \\
P(\mathit{i_u}'\!=\!\mathit{WhatDoYouSee})\!=\!\theta_{\mathrm{perceive\_nosee\_prior[2]}} \\
P(\cdot)\!=\!\theta_{\mathrm{perceive\_nosee\_prior[3]}} \end{cases}$ \\ \\[-1mm]
$r_{5}$: \ \ & $ \textbf{if} \ (\mathit{lastMove}\!=\!\mathit{None} \land \mathit{completed\mbox{-}task}\!=\!\mathit{true}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}P(\mathit{i_u}'\!=\!\mathit{Greeting})\!=\!\theta_{\mathrm{openingprior[0]}} \\
P(\cdot)\!=\!\theta_{\mathrm{openingprior[1]}} \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{lastMove}\!=\!\mathit{Release}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}P(\mathit{i_u}'\!=\!\mathit{Closing})\!=\!\theta_{\mathrm{closingprior[0]}} \\
P(\cdot)\!=\!\theta_{\mathrm{closingprior[1]}} \end{cases}$ \\ \\[-1mm]
$r_{6}$: \ \ & $ \textbf{if} \ (\mathit{completed\mbox{-}task}\!=\!\mathit{true} \land \mathit{carried}\!\neq\!\mathit{[]} \land \mathit{carried}\!\neq\!\mathit{None}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}P(\mathit{i_u}'\!=\!\mathit{Release})\!=\!\theta_{\mathrm{releaseprior[0]}} \\
P(\cdot)\!=\!\theta_{\mathrm{releaseprior[1]}} \end{cases}$ \\ \\[-1mm]
$r_{7}$: \ \ & $\forall \ x, $ \\ & $ \textbf{if} \ (\mathit{completed\mbox{-}task}\!=\!\mathit{true} \land \mathit{carried}\!=\!\mathit{[]} \land \mathit{x}\!\in\!\mathit{perceived}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}P(\mathit{i_u}'\!=\!\mathit{PickUp(x)})\!=\!\theta_{\mathrm{pickup\_see\_prior[0]}} \\
P(\cdot)\!=\!\theta_{\mathrm{pickup\_see\_prior[1]}} \end{cases}$ \\ \\[-1mm]
$r_{8}$: \ \ & $ \textbf{if} \ (\mathit{completed\mbox{-}task}\!=\!\mathit{true} \land \mathit{carried}\!=\!\mathit{[]}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}P(\mathit{i_u}'\!=\!\mathit{PickUp(RedObj)})\!=\!\theta_{\mathrm{pickup\_nosee\_prior[0]}} \\
P(\mathit{i_u}'\!=\!\mathit{PickUp(BlueObj)})\!=\!\theta_{\mathrm{pickup\_nosee\_prior[1]}} \\
P(\mathit{i_u}'\!=\!\mathit{PickUp(AtFeet)})\!=\!\theta_{\mathrm{pickup\_nosee\_prior[2]}} \\
P(\cdot)\!=\!\theta_{\mathrm{pickup\_nosee\_prior[3]}} \end{cases}$ \\ \\[-1mm]
\end{longtable}
\end{footnotesize}

\subsubsection*{User action model}

The user action model derives the possible user actions $a_u$ depending on the current user intention $i_u$ and the last system action $a_m$. 

\begin{footnotesize}
\begin{longtable}{p{2cm}l}
$r_{1}$: \ \ & $\forall \ x,y,$ \\ 
& $ \textbf{if} \ (\mathit{a_m}\!=\!\mathit{AskConfirm({x})} \land \mathit{i_u}\!=\!\mathit{{x}}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}P(\mathit{a_u}'\!=\!\mathit{Confirm})\!=\!\theta_{\mathrm{confirmpredict[0]}} \\
P(\mathit{a_u}'\!=\!\mathit{{Ask(x)}})\!=\!\theta_{\mathrm{confirmpredict[1]}} \\
P(\cdot)\!=\!\theta_{\mathrm{confirmpredict[2]}} \end{cases}$  \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{AskConfirm({y})} \land \mathit{i_u}\!=\!x \ \land \ x\!\neq\!\mathit{{y}} \land \mathit{i_u}\!\neq\!\mathit{None}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}P(\mathit{a_u}'\!=\!\mathit{Disconfirm})\!=\!\theta_{\mathrm{disconfirmpredict[0]}} \\
P(\mathit{a_u}'\!=\!\mathit{{Ask(x)}})\!=\!\theta_{\mathrm{disconfirmpredict[1]}} \\
P(\cdot)\!=\!\theta_{\mathrm{disconfirmpredict[2]}} \end{cases}$ \vspace{1mm} \\ 
& $ \textbf{else if} \ (\mathit{lastMove}\!=\!\mathit{{i_u}} \ \land \ \mathit{i_u}\!=\!x) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}P(\mathit{a_u}'\!=\!\mathit{RepeatLast})\!=\!\theta_{\mathrm{samemove[0]}} \\
P(\mathit{a_u}'\!=\!\mathit{{Ask(x)}})\!=\!\theta_{\mathrm{samemove[1]}} \\
P(\cdot)\!=\!\theta_{\mathrm{samemove[2]}} \end{cases}$ \vspace{1mm} \\ 
& $ \textbf{else if} \ ((\mathit{a_m}\!=\!\mathit{AskRepeat} \lor \mathit{completed\mbox{-}task}\!=\!\mathit{true}) \ \land \ \mathit{i_u}\!=\!x) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}P(\mathit{a_u}'\!=\!\mathit{{Ask(x)}})\!=\!\theta_{\mathrm{intent[0]}} \\
P(\cdot)\!=\!\theta_{\mathrm{intent[1]}} \end{cases}$  \vspace{1mm} \\ 
& $ \textbf{else if} \ (\mathit{i_u}\!\neq\!\mathit{None} \ \land \ \mathit{i_u}\!=\!x) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}P(\mathit{a_u}'\!=\!\mathit{{Ask(x)}})\!=\!\theta_{\mathrm{othercase[0]}} \\
P(\cdot)\!=\!\theta_{\mathrm{othercase[1]}} \end{cases}$ \\ \\[-1mm]
$r_{2}$: \ \ & $\forall \ x,$ \\
& $ \textbf{if} \ (\mathit{a_m}\!=\!\mathit{Do(x)}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}P(\mathit{a_u}'\!=\!\mathit{Stop})\!=\!\theta_{\mathrm{aftermove[0]}} \\
P(\mathit{a_u}'\!=\!\mathit{Disconfirm})\!=\!\theta_{\mathrm{aftermove[1]}} \\
P(\cdot)\!=\!\theta_{\mathrm{aftermove[2]}} \end{cases}$ \\ \\[-1mm]
\end{longtable}
\end{footnotesize}


\subsubsection*{Utility model}

The utility model captures the relative utility of various system actions depending on the current hypotheses about the user intention $i_u$, last user action $a_u$, and general dialogue context. Rule $r_7$ sets an initial negative value to all actions in order ensure that their base utility (in the absence of other information) remains lower than zero.

\begin{footnotesize}
\begin{longtable}{p{2cm}l}
$r_{1}$: \ \ & $\forall \ x, $ \\
& $ \textbf{if} \ (\mathit{i_u}\!=\!\mathit{Move(x)}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}U(\mathit{a_m}'\!=\!\mathit{Do(Move(x))})\!=\!\theta_{\mathrm{move}} \end{cases}$ \\ \\[-1mm]
$r_{2}$: \ \ & $\forall \ x, $ \\ 
& $ \textbf{if} \ (\mathit{i_u}\!=\!\mathit{PickUp({x})} \land \mathit{{x}}\!\in\!\mathit{perceived} \land \mathit{carried}\!=\!\mathit{[]}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}U(\mathit{a_m}'\!=\!\mathit{Do({PickUp(x)})})\!=\!\theta_{\mathrm{pickup}} \end{cases}$ \vspace{1mm} \\ 
&  $ \textbf{else if}  (\mathit{i_u}\!=\!\mathit{PickUp(AtFeet)} \land \mathit{carried}\!=\!\mathit{[]}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}U(\mathit{a_m}'\!=\!\mathit{Do({PickUp(AtFeet)})})\!=\!\theta_{\mathrm{pickup}} \end{cases}$ \vspace{1mm} \\ 
 & $ \textbf{else if} \ (\mathit{i_u}\!=\!\mathit{PickUp({x})} \land \mathit{{y}}\!\in\!\mathit{perceived} \land \mathit{carried}\!\neq\!\mathit{[]}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{a_m}'\!=\!\mathit{Say(AlreadyCarryObject)})\!=\!\theta_{\mathrm{excuse}} \end{cases}$ \vspace{1mm} \\ 
& $ \textbf{else if} \ (\mathit{i_u}\!=\!\mathit{PickUp({x})} \land \mathit{y}\!=\!\mathit{Other}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{a_m}'\!=\!\mathit{Say(CannotResolve)})\!=\!\theta_{\mathrm{excuse}} \end{cases}$ \vspace{1mm} \\ 
& $ \textbf{else if} \ (\mathit{i_u}\!=\!\mathit{PickUp({x})} \land \mathit{{y}}\!\notin\!\mathit{perceived}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{a_m}'\!=\!\mathit{Say(DoNotSeeObject)})\!=\!\theta_{\mathrm{excuse}} \end{cases}$ \\ \\[-1mm]
$r_{3}$: \ \ & $ \textbf{if} \ (\mathit{i_u}\!=\!\mathit{Release} \land \mathit{carried}\!\neq\!\mathit{None} \land \mathit{carried}\!\neq\!\mathit{[]}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}U(\mathit{a_m}'\!=\!\mathit{Do({Release})})\!=\!\theta_{\mathrm{release}} \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{i_u}\!=\!\mathit{Release} \land \mathit{carried}\!=\!\mathit{[]}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{a_m}'\!=\!\mathit{Say(DoNotCarryObject)})\!=\!\theta_{\mathrm{excuse}} \end{cases}$ \\ \\[-1mm]
$r_{4}$: \ \ & $\forall \ x, $ \\ & $ \textbf{if} \ (\mathit{i_u}\!=\!\mathit{DoYouSee({x})} \land \mathit{{x}}\!\in\!\mathit{perceived}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}U(\mathit{a_m}'\!=\!\mathit{Say(Confirm)})\!=\!\theta_{\mathrm{confirmpercept}} \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{i_u}\!=\!\mathit{DoYouSee({x})} \land \mathit{{x}}\!\notin\!\mathit{perceived}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{a_m}'\!=\!\mathit{Say(Disconfirm)})\!=\!\theta_{\mathrm{confirmpercept}} \end{cases}$ \\ \\[-1mm]
$r_{5}$: \ \ & $\forall \ x, $ \\
& $ \textbf{if} \ (\mathit{i_u}\!=\!\mathit{WhatDoYouSee} \ \land \ x\!=\!\mathit{perceived}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}U(\mathit{a_m}'\!=\!\mathit{Describe(x)})\!=\!\theta_{\mathrm{describe}} \end{cases}$ \\ \\[-1mm]
$r_{6}$: \ \ & $ \textbf{if} \ (\mathit{i_u}\!=\!\mathit{Greeting}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}U(\mathit{a_m}'\!=\!\mathit{Say(Greet)})\!=\!\theta_{\mathrm{chitchat}} \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{i_u}\!=\!\mathit{Closing}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{a_m}'\!=\!\mathit{Say(Goodbye)})\!=\!\theta_{\mathrm{chitchat}} \end{cases}$ \\ \\[-1mm]
$r_{7}$: \ \ & $\forall \ x,$ \\
& $ \textbf{if} \  (\mathit{true}) \  \textbf{then}$ \\ & \;\;\;\;\; $\begin{cases}U(\mathit{a_m}'\!=\!\mathit{Do(x)})\!=\!-10 \\
U(\mathit{a_m}'\!=\!\mathit{Say(x)})\!=\!-10 \\
U(\mathit{a_m}'\!=\!\mathit{Describe(x)})\!=\!-10 \end{cases}$ \\ \\[-1mm]
$r_{8}$: \ \ & $ \textbf{if} \ (\mathit{a_m}\!\neq\!\mathit{AskRepeat} \land \mathit{a_u}\!\neq\!\mathit{None} \land \mathit{a_u}\!\neq\!\mathit{Confirm} $ \\ & $\ \ \ \ \  \land \mathit{a_u}\!\neq\!\mathit{Disconfirm} \land \mathit{a_u}\!\neq\!\mathit{Grounding}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}U(\mathit{a_m}'\!=\!\mathit{AskRepeat})\!=\!\theta_{\mathrm{repeat1}} \end{cases}$ \vspace{1mm} \\ & $ \textbf{else}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{a_m}'\!=\!\mathit{AskRepeat})\!=\!\theta_{\mathrm{repeat2}} \end{cases}$ \\ \\[-1mm]
$r_{9}$: \ \ & $\forall \ x,y,$ \\
& $ \textbf{if} \ (\mathit{i_u}\!=\!x \ \land \ \mathit{i_u}\!\neq\!\mathit{DoYouSee(y)} \land \mathit{i_u}\!\neq\!\mathit{WhatDoYouSee} \land \mathit{i_u}\!\neq\!\mathit{Greeting} $ \\ & $\ \ \ \ \ \land \mathit{i_u}\!\neq\!\mathit{Closing} \land \mathit{i_u}\!\neq\!\mathit{None}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}U(\mathit{a_m}'\!=\!\mathit{AskConfirm({x})})\!=\!\theta_{\mathrm{confirm1}} \end{cases}$ \vspace{1mm} \\ & $ \textbf{else}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{a_m}'\!=\!\mathit{AskConfirm(x)})\!=\!\theta_{\mathrm{confirm2}} \end{cases}$ \\ \\[-1mm]
$r_{10}$: \ \ & $ \textbf{if} \ (\mathit{motion}\!=\!\mathit{true} \land \mathit{a_u}\!=\!\mathit{Ask(Stop)}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}U(\mathit{a_m}'\!=\!\mathit{Do(Stop)})\!=\!\theta_{\mathrm{stop}} \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{motion}\!=\!\mathit{true} \land \mathit{a_u}\!=\!\mathit{Disconfirm}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{a_m}'\!=\!\mathit{Do(Stop)})\!=\!\theta_{\mathrm{stop}} \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{motion}\!=\!\mathit{true}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{a_m}'\!\neq\!\mathit{None})\!=\!\theta_{\mathrm{whilemove}} \end{cases}$ \\ \\[-1mm]
\end{longtable}
\end{footnotesize}

\subsubsection*{Generation model}

The generation model maps each selected system action $a_m$ to its corresponding verbal realisation $u_m$.  The surface form is then picked up by the speech synthesis module.
 
\begin{footnotesize}
\begin{longtable}{p{2cm}l}
$r_{1}$: \ \ & $\forall \ x, $ \\
& $ \textbf{if} \ (\mathit{a_m}\!=\!\mathit{Do(Move(Turn))}) \ \textbf{then} $ \\
 & \;\;\;\;\; $ \begin{cases}U(\mathit{u_m}'\!=\!\text{"OK, now turning back}")\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{Do(Move({x},Short))}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{u_m}'\!=\!\text{"OK, moving \{x\} a little bit}")\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{Do(Move({x}))}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{u_m}'\!=\!\text{"OK, moving \{x\}}")\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{Do(PickUp(RedObj))}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{u_m}'\!=\!\text{"OK, picking up the red object}")\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{Do(PickUp(BlueObj))}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{u_m}'\!=\!\text{"OK, picking up the blue object}")\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{Do(PickUp(AtFeet))}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{u_m}'\!=\!\text{"OK, picking up the object at my feet}")\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{Do(Release)}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{u_m}'\!=\!\text{"OK, putting down the object}")\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{Do(Stop)}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{u_m}'\!=\!\text{"OK, stopping now}")\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{AskRepeat}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{u_m}'\!=\!\text{"Sorry, could you repeat?}")\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{Say(AlreadyCarryObject)}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{u_m}'\!=\!\text{"Sorry, I cannot do that, I am already carrying an object}")\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{Say(DoNotCarryObject)}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{u_m}'\!=\!\text{"Sorry, I cannot do that, I am not carrying the object}")\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{Say(DoNotSeeObject)}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{u_m}'\!=\!\text{"Sorry, I cannot do that, I do not see the object}")\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{Say(CannotResolve)}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{u_m}'\!=\!\text{"Sorry, I don't know which object you are talking about}")\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{AskConfirm(Move(Left))}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{u_m}'\!=\!\text{"Should I move left?}")\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{AskConfirm(Move(Left,Short))}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{u_m}'\!=\!\text{"Should I move a bit to the left?}")\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{AskConfirm(Move(Right))}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{u_m}'\!=\!\text{"Should I move right?}")\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{AskConfirm(Move(Right,Short))}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{u_m}'\!=\!\text{"Should I move a bit to the right?}")\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{AskConfirm(Move(Forward))}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{u_m}'\!=\!\text{"Should I move forward?}")\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{AskConfirm(Move(Forward,Short))}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{u_m}'\!=\!\text{"Should I move a bit forward?}")\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{AskConfirm(Move(Backward))}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{u_m}'\!=\!\text{"Should I move backward?}")\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{AskConfirm(Move(Backward,Short))}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{u_m}'\!=\!\text{"Should I step a bit backward?}")\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{AskConfirm(Move(Turn))}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{u_m}'\!=\!\text{"Should I turn 180 degrees?}")\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{AskConfirm(Stop)}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{u_m}'\!=\!\text{"Should I stop?}")\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{AskConfirm(Release)}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{u_m}'\!=\!\text{"Should I release the object?}")\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{AskConfirm(PickUp(RedObj))}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{u_m}'\!=\!\text{"Should I pick up the red object?}")\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{AskConfirm(PickUp(BlueObj))}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{u_m}'\!=\!\text{"Should I pick up the blue object?}")\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{AskConfirm(PickUp(AtFeet))}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{u_m}'\!=\!\text{"Should I pick up the object at my feet?}")\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{Say(Confirm)}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{u_m}'\!=\!\text{"Yes}")\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{Say(Disconfirm)}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{u_m}'\!=\!\text{"No}")\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{Describe({x})} \land \mathit{x}\!=\!\mathit{[]}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{u_m}'\!=\!\text{"I do not see anything}")\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{Describe({x})} \land \mathit{RedObj}\!\in\!\mathit{x} \land \mathit{BlueObj}\!\in\!\mathit{x}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{u_m}'\!=\!\text{"I see a red and a blue cylinder}")\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{Describe({x})} \land \mathit{RedObj}\!\in\!\mathit{x}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{u_m}'\!=\!\text{"I see a red cylinder}")\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{Describe({x})} \land \mathit{BlueObj}\!\in\!\mathit{x}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{u_m}'\!=\!\text{"I see a blue cylinder}")\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{Say(Greet)}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{u_m}'\!=\!\text{"Hi there}")\!=\!1 \end{cases}$ \vspace{1mm} \\ & $ \textbf{else if} \ (\mathit{a_m}\!=\!\mathit{Say(Goodbye)}) \ \textbf{then}$ \\
& \;\;\;\;\; $ \begin{cases}U(\mathit{u_m}'\!=\!\text{"Bye, see you next time}")\!=\!1 \end{cases}$ \\ \\[-1mm]
\end{longtable}
\end{footnotesize}
