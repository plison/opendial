<?xml version="1.0"?> 
<domain xmlns:xs='http://www.w3.org/2001/XMLSchema-instance'>


<categories>
<category name="intent">
	<value>WantX</value>
	<value>WantY</value>
</category>
</categories>

<fixedvariables>
<fixedvariable name="a_u">
	<value>AskForX</value>
	<value>AskForY</value>
	<value>Confirm</value>
	<value>Deny</value>
	<value>Unknown</value>
</fixedvariable>

<fixedvariable name="a_m">
	<value>DoX</value>
	<value>DoY</value>
	<value>AskRepeat</value>
	<value>InformNotUnderstand</value>
</fixedvariable>

<fixedvariable name="f_u_AskForX">
	<value>true</value>
	<value>false</value>
</fixedvariable>
<fixedvariable name="f_u_AskForY">
	<value>true</value>
	<value>false</value>
</fixedvariable>
<fixedvariable name="f_u_Confirm">
	<value>true</value>
	<value>false</value>
</fixedvariable>
<fixedvariable name="f_u_Deny">
	<value>true</value>
	<value>false</value>
</fixedvariable>
<fixedvariable name="f_u_Anything">
	<value>true</value>
	<value>false</value>
</fixedvariable>

</fixedvariables>

<initialstate>
</initialstate>

<rules>

<rule model="userPrediction">
	<variables>
		<var label="a_u"/>
	</variables>
	<case>
		<effect prob="0.33"><assign var="a_u" value="AskForX"/></effect>
		<effect prob="0.33"><assign var="a_u" value="AskForY"/></effect>
		<effect prob="0.34"><assign var="a_u" value="Unknown"/></effect>
	</case>
</rule>


<rule model="userPrediction">
	<variables>
		<anyvar denotation="i" category="intent"/>
		<var label="a_m"/>
	</variables>
	<case>
		<condition>
			<check var="i" value="WantX"/>
			<check var="a_m" value="AskRepeat"/>
		</condition>
		<effect prob="1.0"><assign var="a_u" value="AskForX"/></effect>
	</case>
	<case>
		<condition>
			<check var="i" value="WantY"/>
			<check var="a_m" value="AskRepeat"/>
		</condition>
		<effect prob="1.0"><assign var="a_u" value="AskForY"/></effect>
	</case>
</rule>



<rule model="userRealisation">
	<variables>
		<var label="a_u"/> 
		<var label="f_u_AskForX"/>
	</variables>
	<case>
		<condition><check var="a_u" value="AskForX"/></condition>
		<effect prob="1.0"><assign var="f_u_AskForX" value="true"/></effect>
	</case>
</rule>


<rule model="userRealisation">
	<variables>
		<var label="a_u"/> 
		<var label="f_u_AskForY"/>
	</variables>
	<case>
		<condition><check var="a_u" value="AskForY"/></condition>
		<effect prob="1.0"><assign var="f_u_AskForY" value="true"/></effect>
	</case>
</rule>


<rule model="userRealisation">
	<variables>
		<var label="a_u"/> 
		<var label="f_u_Confirm"/>
	</variables>
	<case>
		<condition><check var="a_u" value="Confirm"/></condition>
		<effect prob="1.0"><assign var="f_u_Confirm" value="true"/></effect>
	</case>
</rule>


<rule model="userRealisation">
	<variables>
		<var label="a_u"/> 
		<var label="f_u_Deny"/>
	</variables>
	<case>
		<condition><check var="a_u" value="Deny"/></condition>
		<effect prob="1.0"><assign var="f_u_Deny" value="true"/></effect>
	</case>
</rule>

<rule model="userRealisation">
	<variables>
		<var label="a_u"/> 
		<var label="f_u_Anything"/>
	</variables>
	<case>
		<condition><check var="a_u" value="Unknown"/></condition>
		<effect prob="1.0"><assign var="f_u_Anything" value="true"/></effect>
	</case>
</rule>


<rule model="userTransition">
	<variables>
		<var label="a_u"/>
		<var label="a_m"/>
	</variables>
	<case>
		<condition operator="and">
			<check var="a_u" value="AskForX"/>
			<check var="a_m" value="AskRepeat" relation="!="/>
		</condition>
		<effect prob="1.0"><add category="intent" value="WantX" label="i" /></effect>
	</case>
</rule>


<rule model="userTransition">
	<variables>
		<var label="a_u"/>
		<var label="a_m"/>
	</variables>
	<case>
		<condition operator="and">
			<check var="a_u" value="AskForY"/>
			<check var="a_m" value="AskRepeat" relation="!="/>
		</condition>
		<effect prob="1.0"><add category="intent" value="WantY" label="i"/></effect>
	</case>
</rule>

<rule model="systemActionValue">
	<variables>
		<var label="i"/>
		<var label="a_m"/>
	</variables>
	<case>
		<condition><check var="i" value="WantX"/></condition>
		<effect prob="1.0"><assign var="a_m" value="DoX"/></effect>
	</case>
	<case>
		<condition><check var="i" value="WantY"/></condition>
		<effect prob="0.0"><assign var="a_m" value="DoX"/></effect>
	</case>
</rule>

<rule model="systemActionValue">
	<variables>
		<var label="i"/>
		<var label="a_m"/>
	</variables>
	<case>
		<condition><check var="i" value="WantY"/></condition>
		<effect prob="1.0"><assign var="a_m" value="DoY"/></effect>
	</case>
	<case>
		<condition><check var="i" value="WantX"/></condition>
		<effect prob="0.0"><assign var="a_m" value="DoY"/></effect>
	</case>
</rule>

<rule model="systemActionValue">
	<variables>
		<var label="i"/>
		<var label="a_m"/>
	</variables>
	<case>
		<effect prob="0.6"><assign var="a_m" value="AskRepeat"/></effect>
	</case>
</rule>


<rule model="systemActionValue">
	<variables>
		<var label="a_u"/>
		<var label="a_m"/>
	</variables>
	<case>
		<condition><check var="a_u" value="Unknown"/></condition>
		<effect prob="1.0"><assign var="a_m" value="InformNotUnderstand"/></effect>
	</case>
</rule>

<rule model="systemTransition">
	<variables>
		<var label="a_m"/>
		<anyvar denotation="i" category="intent"/>
	</variables>
	<case>
		<condition><check var="a_m" value="DoX"/></condition>
		<effect prob="1.0"><delete var="i"/></effect>
	</case>
	<case>
		<condition><check var="a_m" value="DoY"/></condition>
		<effect prob="1.0"><delete var="i"/></effect>
	</case>
</rule>


</rules>

<usertemplates>
	<template type="substring" content="do X" effect="f_u_AskForX=true"/>
	<template type="substring" content="do Y" effect="f_u_AskForY=true"/>
	<template type="substring" content="yes" effect="f_u_Confirm=true"/>
	<template type="substring" content="no" effect="f_u_Deny=true"/>
	<template type="substring" content="*" effect="f_u_Anything=true"/>
</usertemplates>

<systemtemplates>
	<template type="string" content="OK, doing X!" trigger="a_m=DoX"/>
	<template type="string" content="OK, doing Y!" trigger="a_m=DoY"/>
	<template type="string" content="Sorry, could you repeat?" trigger="a_m=AskRepeat"/>
	<template type="string" content="Sorry, did not understand" trigger="a_m=InformNotUnderstand"/>
</systemtemplates>

</domain>