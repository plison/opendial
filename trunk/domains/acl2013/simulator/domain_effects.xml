<?xml version="1.0" encoding="UTF-8"?>

<model trigger="a_m" type="update">

	<rule id="temp_a_m">
		<case>
			<effect>
				<set var="a_mtemp" value="{a_m}" />
				<set var="prev(a_m)" value="{a_mtemp}" />
			</effect>
		</case>
	</rule>


	<rule id="perception1">
		<case>
			<condition>
				<if var="a_m" value="Do(Move(*))" />
				<if var="perceived" value="o2" relation="notcontains" />
			</condition>
			<effect prob="0.3">
				<add var="perceived" value="o2" />
			</effect>
		</case>
		<case>
			<condition>
				<if var="a_m" value="Do(Move(*))" />
			</condition>
			<effect prob="0.2">
				<remove var="perceived" value="o2" />
			</effect>
		</case>
	</rule>

	<rule id="perception2">
		<case>
			<condition>
				<if var="a_m" value="Do(Move(*))" />
				<if var="perceived" value="o1" relation="notcontains" />
			</condition>
			<effect prob="0.3">
				<add var="perceived" value="o1" />
			</effect>
		</case>
		<case>
			<condition>
				<if var="a_m" value="Do(Move(*))" />
			</condition>
			<effect prob="0.2">
				<remove var="perceived" value="o1" />
			</effect>
		</case>
	</rule>


	<rule id="carriedstuff">
		<case>
			<condition>
				<if var="a_m" value="Do(PickUp({X}))" />
			</condition>
			<effect prob="0.9">
				<add var="carried" value="{X}" />
			</effect>
		</case>
		<case>
			<condition operator="and">
				<if var="a_m" value="Do(Release({X}))" />
				<if var="carried" value="{X}" relation="contains" />
			</condition>
			<effect prob="0.9">
				<remove var="carried" value="{X}"/>
			</effect>
		</case>
	</rule>


	<rule id="nextintention_sim">
		<case>
			<condition operator="and">
				<if var="a_m" value="Do({X})" />
				<if var="i_u" value="{X}" />
			</condition>
			<effect prob="1.0">
				<set var="floor" value="start" />
			</effect>
		</case>
		<case>
			<condition operator="and">
				<if var="a_m" value="Excuse(*)" />
			</condition>
			<effect prob="1.0">
				<set var="floor" value="start" />
			</effect>
		</case>
		<case>
			<condition operator="and">
				<if var="a_m" value="Confirm" />
				<if var="i_u" value="DoYouSee(*)" />
			</condition>
			<effect prob="1.0">
				<set var="floor" value="start" />
			</effect>
		</case>
		<case>
			<condition operator="and">
				<if var="a_m" value="Disconfirm" />
				<if var="i_u" value="DoYouSee(*)" />
			</condition>
			<effect prob="1.0">
				<set var="floor" value="start" />
			</effect>
		</case>
		<case>
			<condition operator="and">
				<if var="a_m" value="Describe(*)" />
				<if var="i_u" value="WhatDoYouSee" />
			</condition>
			<effect prob="1.0">
				<set var="floor" value="start" />
			</effect>
		</case>
		<case>
			<condition operator="or">
				<if var="a_m" value="Do({X})" />
				<if var="a_m" value="Excuse(*)" />
				<if var="a_m" value="Describe(*)" />
				<if var="a_m" value="Disconfirm" />
				<if var="a_m" value="Confirm" />
			</condition>
			<effect prob="0.5">
				<set var="floor" value="start" />
			</effect>
			<effect prob="0.5">
				<set var="floor" value="continue" />
			</effect>
		</case>
		<case>
			<condition>
				<if var="i_u" value="None" />
			</condition>
			<effect>
				<set var="floor" value="start" />
			</effect>
		</case>
		<case>
			<effect prob="1.0">
				<set var="floor" value="continue" />
			</effect>
		</case>
	</rule>


</model>