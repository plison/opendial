<?xml version="1.0" encoding="UTF-8"?>

<model trigger="a_u" type="decision">

	<rule id="movements">
		<case>
			<condition>
				<if var="a_u" value="Move(*)" />
			</condition>
			<effect util="theta_(movements1)">
				<set var="a_m" value="Do({a_u})" />
			</effect>
			<effect util="theta_(movements2)">
				<set var="a_m" value="Ground({a_u})" />
			</effect>
		</case>
		<case>
			<condition>
				<if var="a_u" value="Confirm" />
				<if var="a_ub" value="Move(*)" />
			</condition>
			<effect util="theta_(movements1)">
				<set var="a_m" value="Do({a_ub})" />
			</effect>
			<effect util="theta_(movements2)">
				<set var="a_m" value="Ground({a_ub})" />
			</effect>
		</case>
		<case>
			<condition>
				<if var="a_m" value="Ground(Move({X}))" />
				<if var="a_u" value="Nothing" />
			</condition>
			<effect util="theta_(movements1)">
				<set var="a_m" value="Do(Move({X}))" />
			</effect>
		</case>
	</rule>
	
	
    <rule id="pickup">
		<case>
			<condition operator="and">
				<if var="a_u" value="PickUp({X})" />
				<if var="perceived" value="{X}" relation="contains"/>
				<if var="carried" value="[]"/>
			</condition>
			<effect util="theta_(pickup1)">
				<set var="a_m" value="Do({a_u})" />
			</effect>
			<effect util="theta_(pickup2)">
				<set var="a_m" value="Ground({a_u})" />
			</effect>
		</case>
		<case>
			<condition operator="and">
				<if var="a_u" value="PickUp({X})" />
				<if var="perceived" value="{X}" relation="contains"/>
				<if var="carried" value="[]" relation="!=" />
			</condition>
			<effect util="theta_(pickup3)">
				<set var="a_m" value="Excuse(AlreadyCarryObject)" />
			</effect>
		</case>
		<case>
			<condition>
				<if var="a_u" value="PickUp({X})" />
				<if var="perceived" value="{X}" relation="notcontains" />
			</condition>
			<effect util="theta_(pickup4)">
				<set var="a_m" value="Excuse(DoNotSeeObject)" />
			</effect>
		</case>
		<case>
			<condition operator="and">
				<if var="a_u" value="Confirm" />
				<if var="a_ub" value="PickUp({X})" />
				<if var="perceived" value="{X}" relation="contains"/>
				<if var="carried" value="[]"/>
			</condition>
			<effect util="theta_(pickup1)">
				<set var="a_m" value="Do({a_ub})" />
			</effect>
			<effect util="theta_(pickup2)">
				<set var="a_m" value="Ground({a_ub})" />
			</effect>
		</case>
		<case>
			<condition operator="and">
				<if var="a_u" value="Confirm" />
				<if var="a_ub" value="PickUp({X})" />
				<if var="perceived" value="{X}" relation="contains"/>
				<if var="carried" value="[]" relation="!=" />
			</condition>
			<effect util="theta_(pickup3)">
				<set var="a_m" value="Excuse(AlreadyCarryObject)" />
			</effect>
		</case>
		<case>
			<condition>
				<if var="a_u" value="Confirm" />
				<if var="a_ub" value="PickUp({X})" />
				<if var="perceived" value="{X}" relation="notcontains" />
			</condition>
			<effect util="theta_(pickup4)">
				<set var="a_m" value="Excuse(DoNotSeeObject)" />
			</effect>
		</case>
		<case>
			<condition operator="and">
				<if var="a_m" value="Ground(PickUp{X})" />
				<if var="a_u" value="Nothing" />
				<if var="perceived" value="{X}" relation="contains"/>
				<if var="carried" value="[]"/>
			</condition>
			<effect util="theta_(pickup1)">
				<set var="a_m" value="Do(PickUp({X}))" />
			</effect>
		</case>
		<case>
			<condition operator="and">
				<if var="a_m" value="Ground(PickUp({X}))" />
				<if var="a_u" value="Nothing" />
				<if var="perceived" value="{X}" relation="contains"/>
				<if var="carried" value="[]" relation="!=" />
			</condition>
			<effect util="theta_(pickup3)">
				<set var="a_m" value="Excuse(AlreadyCarryObject)" />
			</effect>
		</case>
		<case>
			<condition>
				<if var="a_m" value="Ground(PickUp({X}))" />
				<if var="a_u" value="Nothing" />
				<if var="perceived" value="{X}" relation="notcontains" />
			</condition>
			<effect util="theta_(pickup4)">
				<set var="a_m" value="Excuse(DoNotSeeObject)" />
			</effect>
		</case>
	</rule>
	
		
	
	<rule id="release">
		<case>
			<condition operator="and">
				<if var="a_u" value="Release({X})" />
				<if var="carried" value="{X}" relation="contains"/>
			</condition>
			<effect util="theta_(release1)">
				<set var="a_m" value="Do({a_u})" />
			</effect>
			<effect util="theta_(release2)">
				<set var="a_m" value="Ground({a_u})" />
			</effect>
		</case>
		<case>
			<condition>
				<if var="a_u" value="Release({X})" />
				<if var="carried" value="{X}" relation="notcontains"/>
			</condition>
			<effect util="theta_(release3)">
				<set var="a_m" value="Excuse(DoNotCarryObject)" />
			</effect>
		</case>
		<case>
			<condition operator="and">
				<if var="a_u" value="Confirm" />
				<if var="a_ub" value="Release({X})" />
				<if var="carried" value="{X}" relation="contains"/>
			</condition>
			<effect util="theta_(release1)">
				<set var="a_m" value="Do({a_ub})" />
			</effect>
			<effect util="theta_(release2)">
				<set var="a_m" value="Ground({a_ub})" />
			</effect>
		</case>
		<case>
			<condition>
				<if var="a_u" value="Confirm" />
				<if var="a_ub" value="Release({X})" />
				<if var="carried" value="{X}" relation="notcontains"/>
			</condition>
			<effect util="theta_(release3)">
				<set var="a_m" value="Excuse(DoNotCarryObject)" />
			</effect>
		</case>
		<case>
			<condition operator="and">
				<if var="a_m" value="Ground(Release({X}))" />
				<if var="a_u" value="Nothing"/>
				<if var="carried" value="{X}" relation="contains"/>
			</condition>
			<effect util="theta_(release1)">
				<set var="a_m" value="Do({a_u})" />
			</effect>
			<effect util="theta_(release2)">
				<set var="a_m" value="Ground({a_u})" />
			</effect>
		</case>
		<case>
			<condition>
				<if var="a_m" value="Ground(Release({X}))" />
				<if var="a_u" value="Nothing"/>
				<if var="carried" value="{X}" relation="notcontains"/>
			</condition>
			<effect util="theta_(release3)">
				<set var="a_m" value="Excuse(DoNotCarryObject)" />
			</effect>
		</case>
	</rule>
	
		
	<rule>
		<case>
			<condition>
				<if var="a_u" value="None" relation="!="/>
				<if var="a_u" value="Nothing" relation="!="/>
			</condition>
			<effect util="theta_(none)">
				<set var="a_m" value="None" />
			</effect>		
		</case>
		<case>
			<effect util="theta_(none2)">
				<set var="a_m" value="None" />
			</effect>		
		</case>
	</rule>
	
	
	<rule>
		<case>
		 <condition>
		 	<if var="a_u" value="Confirm" relation="!="/>
		 	<if var="a_u" value="RepeatLast" relation="!="/>
		 </condition>
			<effect util="theta_(wrong1)">
				<set var="a_m" value="Do(*)" />
				<set var="a_m" value="Do({a_u})" relation="!=" />
			</effect>
			<effect util="theta_(wrong2)">
				<set var="a_m" value="Ground(*)" />
				<set var="a_m" value="Ground({a_u})" relation="!=" />
			</effect>	
			<effect util="theta_(wrong3)">
				<set var="a_m" value="Excuse(*)" />
			</effect>	
		</case>
		<case>
		 <condition>
		 	<if var="a_u" value="Confirm"/>
		 </condition>
			<effect util="theta_(wrong1)">
				<set var="a_m" value="Do(*)" />
				<set var="a_m" value="Do({a_ub})" relation="!=" />
			</effect>
			<effect util="theta_(wrong2)">
				<set var="a_m" value="Ground(*)" />
				<set var="a_m" value="Ground({a_ub})" relation="!=" />
			</effect>	
			<effect util="theta_(wrong3)">
				<set var="a_m" value="Excuse(*)" />
			</effect>	
		</case>
	</rule>
	
	
	<rule>
		<case>
		<condition>
				<if var="a_m" value="AskRepeat" relation="!="/>
		</condition>
			<effect util="theta_(repeat)">
				<set var="a_m" value="AskRepeat" />
			</effect>
		</case>
	</rule>
	
	
	
	<rule>
		<case>
		<condition>
				<if var="a_u" value="Disconfirm"/>
		</condition>
			<effect util="theta_(repeat2)">
				<set var="a_m" value="AskRepeat" />
			</effect>
		</case>
	</rule>

	<rule>
		<case>
			<effect util="theta_(confirm1)">
				<set var="a_m" value="Confirm({a_u})" />
			</effect>
			<effect util="theta_(confirm2)">
				<set var="a_m" value="Confirm(*)" />
				<set var="a_m" value="Confirm({a_u})" relation="!=" />
			</effect>
			<effect util="-10">
				<set var="a_m" value="Confirm(None)" />
			</effect>
		</case>
	</rule>


	<rule>
		<case>
			<condition>
				<if var="a_m" value="Confirm(*)"/>
			</condition>
			<effect util="-10">
				<set var="a_m" value="Confirm(*)"/>
			</effect>
		</case>	
	</rule>
	
	
	<rule id="doyousee">
		<case>
			<condition>
				<if var="a_u" value="DoYouSee({X})" />
				<if var="perceived" value="{X}" relation="contains" />
			</condition>
			<effect util="theta_(doyousee1)">
				<set var="a_m" value="Confirm" />
			</effect>
			<effect util="theta_(doyousee2)">
				<set var="a_m" value="Disconfirm" />
			</effect>
		</case>
		<case>
			<condition>
				<if var="a_u" value="DoYouSee({X})" />
				<if var="perceived" value="{X}" relation="notcontains" />
			</condition>
			<effect util="theta_(doyousee3)">
				<set var="a_m" value="Disconfirm" />
			</effect>
			<effect util="theta_(doyousee4)">
				<set var="a_m" value="Confirm" />
			</effect>
		</case>
		<case>
			<condition>
				<if var="a_u" value="Confirm" />
				<if var="a_ub" value="DoYouSee({X})" />
				<if var="perceived" value="{X}" relation="contains" />
			</condition>
			<effect util="theta_(doyousee1)">
				<set var="a_m" value="Confirm" />
			</effect>
			<effect util="theta_(doyousee2)">
				<set var="a_m" value="Disconfirm" />
			</effect>
		</case>
		<case>
			<condition>
				<if var="a_u" value="Confirm" />
				<if var="a_ub" value="DoYouSee({X})" />
				<if var="perceived" value="{X}" relation="notcontains" />
			</condition>
			<effect util="theta_(doyousee3)">
				<set var="a_m" value="Disconfirm" />
			</effect>
			<effect util="theta_(doyousee4)">
				<set var="a_m" value="Confirm" />
			</effect>
		</case>
		<case>
			<effect util="theta_(doyousee5)">
				<set var="a_m" value="Confirm" />
			</effect>
			<effect util="theta_(doyousee6)">
				<set var="a_m" value="Disconfirm" />
			</effect>
		</case>
	</rule>
	
	

	<rule id="whatdoyousee">
		<case>
			<condition>
				<if var="a_u" value="WhatDoYouSee" />
			</condition>
			<effect util="theta_(whatdoyousee1)">
				<set var="a_m" value="Describe({perceived})" />
			</effect>
		</case>
			<case>
			<condition>
				<if var="a_u" value="Confirm" />
				<if var="a_ub" value="WhatDoYouSee" />
			</condition>
			<effect util="theta_(whatdoyousee1)">
				<set var="a_m" value="Describe({perceived})" />
			</effect>
		</case>
		<case>
			<effect util="theta_(whatdoyousee2)">
				<set var="a_m" value="Describe(*)" />
			</effect>
		</case>
	</rule>
	
	<rule id="repeatlast">
		<case>
			<condition>
			<if var="a_u" value="RepeatLast"/>
			</condition>
			<effect util="theta_(repeatLast)">
				<set var="a_m" value="{a_m}"/>
			</effect>
		</case>
		<case>
			<condition>
			<if var="a_u" value="Confirm"/>
			<if var="a_ub" value="RepeatLast"/>
			</condition>
			<effect util="theta_(repeatLast)">
				<set var="a_m" value="{a_m}"/>
			</effect>
		</case>
	</rule>

</model>